<<<<<<< HEAD
{"version":3,"file":"index.js","mappings":";;;;;;;;AAAA;;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;;;AAGA;;AAIA;;;AAGA;AAAA;;AAAA;AAAA;AAAA;AAEA;;AAGA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;AA7KA;AAmLA;AACA","sources":["webpack://test/./dist/index.js"],"sourcesContent":["function runCode(){\n                \n            \n            var Page = function(page){\n              return page\n            }\n          return Page({\n            \n            parseTag(tag) {\n              let res = {\n                  type1: \"tag\",\n                  name: \"\",\n                  voidElement: false,\n                  // attrs: {},\n                  children: [],\n              };\n              let tagMatch = tag.match(/<\\/?([^\\s]+?)[/\\s>]/);\n              if (tagMatch) {\n                  // 标签名称为正则匹配的第2项\n                  res.type1 = tagMatch[1];\n                  if (tag.charAt(tag.length - 2) === \"/\") {\n                      // 判断tag字符串倒数第二项是不是 / 设置为空标签。 例子：<img/>\n                      res.voidElement = true;\n                  }\n              }\n              // 匹配所有的标签正则\n              let classList = tag.match(/\\s([^'\"/\\s><]+?)\\s*?=\\s*?(\".*?\"|'.*?')/g);\n            \n              if (classList) {\n                let style = ''\n                  for (let i = 0; i < classList.length; i++) {\n                      // 去空格再以= 分隔字符串  得到['属性名称','属性值']\n             \n                      let c = classList[i].split(\"=\");\n                      // c[1] = c[1].replace(/\\s*/g, \"\")\n                      c[0] = c[0].replace(/\\s*/g, \"\")\n                      // 循环设置属性\n                      var lengthc = 2\n                      for(lengthc; lengthc < c.length ; lengthc++){\n                        c[1] += \"=\" + c[lengthc]\n                      }\n                      let p = c[1].substring(1, c[1].length - 1)\n                      try{\n                        p = JSON.parse(c[1].substring(1, c[1].length - 1))\n                      }catch(e){\n                       \n                      }\n            \n                      if (c[1]) {\n                        if(c[0] === 'style'){\n                          style = p + style\n                          res[c[0]] = style\n                        }else{\n                          res[c[0]] = p\n                        }\n                \n                      };\n            \n                  }\n              }\n              return res;\n            },\n            \n            parse(html) {\n              var that = this;\n              let result = [];\n              let current;\n              let level = -1;\n              let arr = [];\n              let tagRE = /<[a-zA-Z\\-\\!\\/](?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])*>/g;\n              html.replace(tagRE, function (tag, index) {\n                  // 判断第二个字符是不是'/'来判断是否open\n                  let isOpen = tag.charAt(1) !== \"/\";\n                  // 获取标签末尾的索引\n                  let start = index + tag.length;\n                  // 标签之前的文本信息\n                  let text = html.slice(start, html.indexOf(\"<\", start));\n            \n                  let parent;\n                  if (isOpen) {\n                      level++;\n                      // 设置标签属性\n                      current = that.parseTag(tag);\n                      // 判断是否为文本信息，是就push一个text children  不等于'  '\n                      if (!current.voidElement && text.trim()) {\n                          current[\"text\"] = text\n                      }\n                      // 如果我们是根用户，则推送新的基本节点\n                      if (level === 0) {\n                          result.push(current);\n                      }\n                      // 判断有没有上层，有就push当前标签\n                      parent = arr[level - 1];\n                      if (parent) {\n                          parent.children.push(current);\n                      }\n                      // console.log(current)\n                      arr[level] = current;\n                  }\n                  // 如果不是开标签，或者是空元素：</div><img>\n                  if (!isOpen || current.voidElement) {\n                      // level--\n                      level--;\n                  }\n              });\n              // console.log(result)\n              return result;\n            \n            },\n          setdata: function setdata(dictData) {\n            \n            for(var i in dictData){\n              this.data[i] = dictData[i]\n            }\n            var html = `<view>hello webpack</view>`\n            this.setData({html : this.parse(html)});\n          },\n            \n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {options = this.options; this.data.dark =wx.getSystemInfoSync().theme; wx.onThemeChange(e => {console.log(e.theme);this.setdata({dark: e.theme})}); this.setdata();\n    \n  },\n\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    \n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n    \n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n    \n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n    \n  }\n})\n      \n      \n        }\n            window.exports = runCode;\n        \n            "],"names":[],"sourceRoot":""}
=======
{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAjBA;;AAoBA;AACA;;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AAAA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;AAgBA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;AAEA;;;AAGA;;;AAKA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;;AAEA;AACA;AAAA;AAAA;AAEA;AAFA;AAGA;AAHA;AAIA;AAJA;AAKA;AALA;AAMA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;AAEA;AACA;AAAA;AAEA;AACA;AACA;;AAEA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAnBA;AAqBA;;AAEA;AAAA;AACA;AACA;AACA;AADA;AAGA;;AAEA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAFA;;AAKA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AA3BA;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;AAGA;;;AAGA;AAAA;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAhBA;AAkBA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAGA;AAGA;;;AAGA;;AAIA;;;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAteA;AA0eA;AACA","sources":["webpack://test/./dist/index.js"],"sourcesContent":["function runCode(){\n              // pages/calendar/calendar.js\r\nfunction formatDay(day) {\r\n  switch (day) {\r\n    case 1: day = \"一\"; break;\r\n    case 2: day = \"二\"; break;\r\n    case 3: day = \"三\"; break;\r\n    case 4: day = \"四\"; break;\r\n    case 5: day = \"五\"; break;\r\n    case 6: day = \"六\"; break;\r\n    case 7: day = \"日\"; break;\r\n    case 0: day = \"日\"; break;\r\n\r\n    case \"一\": day = 1; break;\r\n    case \"二\": day = 2; break;\r\n    case \"三\": day = 3; break;\r\n    case \"四\": day = 4; break;\r\n    case \"五\": day = 5; break;\r\n    case \"六\": day = 6; break;\r\n    case \"七\": day = 7; break;\r\n    case \"日\": day = 7; break;\r\n  }\r\n\r\n  return day\r\n}\r\n\r\n  \n            \n            var Page = function(page){\n              return page\n            }\n          return Page({\n            \n            parseTag(tag) {\n              let res = {\n                  type1: \"tag\",\n                  name: \"\",\n                  voidElement: false,\n                  // attrs: {},\n                  children: [],\n              };\n              let tagMatch = tag.match(/<\\/?([^\\s]+?)[/\\s>]/);\n              if (tagMatch) {\n                  // 标签名称为正则匹配的第2项\n                  res.type1 = tagMatch[1];\n                  if (tag.charAt(tag.length - 2) === \"/\") {\n                      // 判断tag字符串倒数第二项是不是 / 设置为空标签。 例子：<img/>\n                      res.voidElement = true;\n                  }\n              }\n              // 匹配所有的标签正则\n              let classList = tag.match(/\\s([^'\"/\\s><]+?)\\s*?=\\s*?(\".*?\"|'.*?')/g);\n            \n              if (classList) {\n                let style = ''\n                  for (let i = 0; i < classList.length; i++) {\n                      // 去空格再以= 分隔字符串  得到['属性名称','属性值']\n             \n                      let c = classList[i].split(\"=\");\n                      // c[1] = c[1].replace(/\\s*/g, \"\")\n                      c[0] = c[0].replace(/\\s*/g, \"\")\n                      // 循环设置属性\n                      var lengthc = 2\n                      for(lengthc; lengthc < c.length ; lengthc++){\n                        c[1] += \"=\" + c[lengthc]\n                      }\n                      let p = c[1].substring(1, c[1].length - 1)\n                      try{\n                        p = JSON.parse(c[1].substring(1, c[1].length - 1))\n                      }catch(e){\n                       \n                      }\n            \n                      if (c[1]) {\n                        if(c[0] === 'style'){\n                          style = p + style\n                          res[c[0]] = style\n                        }else{\n                          res[c[0]] = p\n                        }\n                \n                      };\n            \n                  }\n              }\n              return res;\n            },\n            \n            parse(html) {\n              var that = this;\n              let result = [];\n              let current;\n              let level = -1;\n              let arr = [];\n              let tagRE = /<[a-zA-Z\\-\\!\\/](?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])*>/g;\n              html.replace(tagRE, function (tag, index) {\n                  // 判断第二个字符是不是'/'来判断是否open\n                  let isOpen = tag.charAt(1) !== \"/\";\n                  // 获取标签末尾的索引\n                  let start = index + tag.length;\n                  // 标签之前的文本信息\n                  let text = html.slice(start, html.indexOf(\"<\", start));\n            \n                  let parent;\n                  if (isOpen) {\n                      level++;\n                      // 设置标签属性\n                      current = that.parseTag(tag);\n                      // 判断是否为文本信息，是就push一个text children  不等于'  '\n                      if (!current.voidElement && text.trim()) {\n                          current[\"text\"] = text\n                      }\n                      // 如果我们是根用户，则推送新的基本节点\n                      if (level === 0) {\n                          result.push(current);\n                      }\n                      // 判断有没有上层，有就push当前标签\n                      parent = arr[level - 1];\n                      if (parent) {\n                          parent.children.push(current);\n                      }\n                      // console.log(current)\n                      arr[level] = current;\n                  }\n                  // 如果不是开标签，或者是空元素：</div><img>\n                  if (!isOpen || current.voidElement) {\n                      // level--\n                      level--;\n                  }\n              });\n              // console.log(result)\n              return result;\n            \n            },\n          setdata: function setdata(dictData) {\n            \n            for(var i in dictData){\n              this.data[i] = dictData[i]\n            }\n            var html = `<view class=\"page\" style=\"margin-top: 30rpx; padding-bottom: 1rpx;\">  <view class=\"page__hd\" style=\"flex-direction: column; justify-content: center; padding: 20rpx 35rpx 0 35rpx;\">    <view class=\"page__title\" style=\"color: rgb(0, 0, 0); font-size: 20px; font-weight: 400; margin-bottom: 5px; margin-left: 30rpx; text-align: left;\">倒数日</view>    <view class=\"page__desc\" style=\"color: rgb(97, 97, 97); font-size: 30rpx; margin-left: 30rpx; text-align: left;\">      <view>${typeof this.data.term === \"object\" ? JSON.stringify( this.data.term) : this.data.term}</view>      <text>${typeof this.data.jsonContent.month === \"object\" ? JSON.stringify( this.data.jsonContent.month) : this.data.jsonContent.month+1} 月${typeof this.data.jsonContent.day === \"object\" ? JSON.stringify( this.data.jsonContent.day) : this.data.jsonContent.day} 日 ${typeof this.data.jsonContent.dayOfWeek === \"object\" ? JSON.stringify( this.data.jsonContent.dayOfWeek) : this.data.jsonContent.dayOfWeek} （滑动可删除)</text>    </view>    <view class=\"touch\" style=\"padding-left: -10rpx;\">      ${this.data.list.map((item, index) =>  ` <view style=\"touch-container\" id=\"${typeof index === \"object\" ? JSON.stringify( index) : index}\" bindtap=\"showdates\" bindtouchstart=\"touchstart\" bindtouchmove=\"touchmove\"  wx:key=\" \" style=\"display: flex; font-size: 16px; justify-content: space-between; overflow: hidden; padding: 20rpx 0;\">        <view  ${this.data.dark === 'dark' ? 'style=\"    background-color: rgba(224, 224, 224, 0.589);  \"' : ''} style=\"touch-item ${typeof item.isTouchMove === \"object\" ? JSON.stringify( item.isTouchMove) : item.isTouchMove?\"wx&class    ;     -webkit-transform   :    translateX(0)   ;     transform   :    translateX(0)   ;   \":\"\"}\" style=\"background-color: rgba(248, 248, 248, 0.9); border-radius: 22rpx; box-shadow: 0 7rpx 7rpx #d1cece; color: #fff; display: flex; height: 110rpx; justify-content: space-around; margin-left: -130px; overflow: hidden; top: 3rpx; transform: translateX(130px); transition: all 0.4s; width: 92%;\">          <view class=\"weui-flex\" style=\"margin-left:10rpx;color:#010C10;\">                       ${typeof item.gapDays === \"object\" ? JSON.stringify( item.gapDays) : item.gapDays>0 ? `<view  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(0%) !important;  \"' : ''} style=\"weui-item__title\"  style=\"-webkit-box-orient: vertical; -webkit-line-clamp: 1; color: #444444; display: -webkit-box; font-size: 34rpx; font-weight: 550; margin-left: 15rpx; overflow: hidden; padding-top: 28rpx; text-overflow: ellipsis; width: 300rpx;\">              <text>${typeof item.holidayName === \"object\" ? JSON.stringify( item.holidayName) : item.holidayName} 还有</text>            </view>`: ``}            ${typeof item.gapDays === \"object\" ? JSON.stringify( item.gapDays) : item.gapDays<=0 ? `<view  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(0%) !important;  \"' : ''} style=\"weui-item__title\"  style=\"-webkit-box-orient: vertical; -webkit-line-clamp: 1; color: #444444; display: -webkit-box; font-size: 34rpx; font-weight: 550; margin-left: 15rpx; overflow: hidden; padding-top: 28rpx; text-overflow: ellipsis; width: 300rpx;\">              <text>${typeof item.holidayName === \"object\" ? JSON.stringify( item.holidayName) : item.holidayName} 已经</text>            </view>`: ``}                      </view>          <view  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(100%) !important;  \"' : ''} class=\"weui-flex__item\" style=\"-webkit-box-flex: 1; -webkit-flex: 1; flex: 1;\">            <view style=\"gapDays ${typeof item.gapDays>0 === \"object\" ? JSON.stringify( item.gapDays>0) : item.gapDays>0?\"wx&class       ;        text-shadow     :      0px -1px 1px #865204f3 !important      ;          background-color     :      #fd9801e1 !important      ;      \":\"wx&class       ;        text-shadow     :      0px -1px 1px #294161 !important      ;        background-color     :      #5685c2c2 !important      ;      \"}  \" style=\"align-items: center; color: #ffff; display: flex; flex-direction: row; font-size: 62rpx; height: 110rpx; justify-content: center; text-align: center;\">              ${typeof item.gapDays === \"object\" ? JSON.stringify( item.gapDays) : item.gapDays>0 ? `<text  style=\"flex: 1;\">${typeof item.gapDays === \"object\" ? JSON.stringify( item.gapDays) : item.gapDays}</text>`: ``}              ${typeof item.gapDays === \"object\" ? JSON.stringify( item.gapDays) : item.gapDays<=0 ? `<text  style=\"flex: 1;\">${0-item.gapDays}</text>`: ``}              <view style=\"Days ${typeof item.gapDays>0 === \"object\" ? JSON.stringify( item.gapDays>0) : item.gapDays>0?\"wx&class     ;      background-color   :    #e27c07e8 !important    ;    \":\"wx&class     ;      background-color   :    #3170a7e3 !important    ;    \"} \" style=\"align-items: center; display: flex; height: 110rpx; justify-content: center; width: 115rpx;\">                <text style=\"color: #ffff; flex: 1; font-size: 38rpx;\">天</text>              </view>            </view>          </view>        </view>        <view  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(0%) !important;  \"' : ''} style=\"edit ${typeof item.isTouchMove === \"object\" ? JSON.stringify( item.isTouchMove) : item.isTouchMove?\"wx&class    ;     -webkit-transform   :    translateX(0)   ;     transform   :    translateX(0)   ;   \":\"\"}\" bindtap=\"edit\" id=\"${typeof index === \"object\" ? JSON.stringify( index) : index}\" style=\"-webkit-transform: translateX(130px); -webkit-transition: all 0.4s; align-items: center; background-color: #f7f5f5; border-radius: 115rpx; color: #fff; display: flex; flex-direction: column; height: 95rpx; justify-content: center; margin-top: 8rpx; transform: translateX(130px); transition: all 0.4s; width: 95rpx;\">          <image  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(0%) !important;  \"' : ''} src=\"../../../images/edit.png\" style=\"height: 40rpx; width: 40rpx;\"></image>        </view>        <view style=\"del ${typeof item.isTouchMove === \"object\" ? JSON.stringify( item.isTouchMove) : item.isTouchMove?\"wx&class    ;     -webkit-transform   :    translateX(0)   ;     transform   :    translateX(0)   ;   \":\"\"}\" bindtap=\"del\" id=\"${typeof index === \"object\" ? JSON.stringify( index) : index}\" style=\"-webkit-transform: translateX(130px); -webkit-transition: all 0.4s; align-items: center; background-color: #f7f5f5; border-radius: 115rpx; color: #fff; display: flex; flex-direction: column; height: 95rpx; justify-content: center; margin-top: 8rpx; transform: translateX(130px); transition: all 0.4s; width: 95rpx;\">          <image src=\"../../../images/del.png\" style=\"height: 40rpx; width: 40rpx;\"></image>        </view>      </view>`)}    </view>    <view class=\"nav-head\" style=\"align-items: center; background-color: #FAFAFA; border-bottom-left-radius: 100%; border-top-left-radius: 100%; box-shadow: 0px 0px 4px 0px #c7c7c7; display: flex; flex-direction: row; height: 100rpx; justify-content: space-between; position: fixed; right: 5rpx; top: 50rpx; width: 110rpx; z-index: 9;\">      <view class=\"img-button feedback-btn\" bindtap=\"feedbackHandler\" style=\"display: inline-block; height: 60rpx; margin-left: 30rpx; margin-right: 20rpx; margin-top: 10rpx; width: 70rpx;\">        <image src=\"../../../images/btn_feed@2x.png\" style=\"height: 80%; width: 80%;\"></image>      </view>    </view>    <view  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(100%) !important;  \"' : ''} class=\"round-click\" bindtap=\"showPic\" style=\"align-items: center; background-color: #bc3e49; border-radius: 100%; bottom: 50rpx; display: flex; height: 120rpx; justify-content: center; position: fixed; right: 25rpx; width: 120rpx; z-index: 9;\">      <text style=\"color: #fff; font-size: 32rpx; max-width: 80rpx; text-align: center;\">查看校历</text>    </view>  </view></view>${typeof this.data.showModel === \"object\" ? JSON.stringify( this.data.showModel) : this.data.showModel ? `<view style=\"add\"  style=\"bottom: 0; font-family: unset; left: 0; position: absolute; right: 0; top: 0; z-index: 9999;\">    <view class=\"add_background\" bindtap=\"feedbackHandler\" style=\"background-color: rgba(0, 0, 0, 0.349); bottom: 0; font-family: unset; height: 100%; left: 0; opacity: 0.6; position: absolute; right: 0; top: 0; z-index: 9999;\"></view>    <view  ${this.data.dark === 'dark' ? 'style=\"    filter: invert(0%) !important;    background-color: rgb(238, 237, 237);  \"' : ''} style=\"add_contain\" animation=\"${typeof this.data.animation === \"object\" ? JSON.stringify( this.data.animation) : this.data.animation}\" style=\"align-items: center; background-color: #fff; bottom: 0; display: flex; flex-direction: column; padding: 50rpx 0; position: fixed; width: 100%; z-index: 99999;\">      <view class=\"add_title\" style=\"font-weight: 600; padding-bottom: 50rpx; size: 18px;\">        <text>添加倒数日</text>      </view>      <view class=\"course\" style=\"align-content: center; background-color: rgb(245, 245, 245); border-radius: 20rpx; box-sizing: unset; display: flex; flex-direction: row; margin: 20rpx; padding: 20rpx; width: 85%;\">          名称:        <input style=\"padding-top:2rpx;padding-left: 10rpx;\" bindinput=\"bindInputChange\" placeholder=\"名称\"></input>      </view>      <view class=\"section\" dates=\"1\" style=\"background-color: rgb(245, 245, 245); border-radius: 20rpx; margin: 20rpx; padding: 20rpx; width: 85%;\">          <picker mode=\"date\" value=\"${typeof this.data.date === \"object\" ? JSON.stringify( this.data.date) : this.data.date}\" start=\"1978-01-01\" end=\"2050-1-23\" bindchange=\"bindDateChange\">            <view class=\"picker\">              日期:   ${typeof this.data.dates === \"object\" ? JSON.stringify( this.data.dates) : this.data.dates}            </view>          </picker>        </view>      <view  ${this.data.dark === 'dark' ? 'style=\"    color: rgba(0, 0, 0, 0.808);  \"' : ''} class=\"add_btn\" style=\"align-items: center; display: flex; flex-direction: row; justify-content: center; margin: 70rpx 0 50rpx; width: 85%;\">        <button bindtap=\"feedbackHandler\" style=\"background-color: rgba(245, 245, 245); border-radius: 50rpx; color: rgb(54, 54, 54); size: 16px; width: 45% !important;\">取 消</button>        <button bindtap=\"addSubmit\" style=\"background-color: rgba(245, 245, 245); border-radius: 50rpx; color: rgb(54, 54, 54); size: 16px; width: 45% !important;\">保 存</button>      </view>    </view></view>`: `5`}`\n            this.setData({html : this.parse(html)});\n          },\n            \r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data : {\r\n    html: \"\",\r\n    jsonContent: {\r\n      day: new Date().getDate(),\r\n      month: new Date().getMonth(),\r\n      dayOfWeek: \"星期\" + formatDay(new Date().getDay()),\r\n    },\r\n    startX: 0, //开始坐标\r\n    startY: 0,\r\n    showModel: false,\r\n    dates: \"\",\r\n    list: [],\r\n    dayName: \"\",\r\n    changeDay: \"\"\r\n  },\r\n\r\n  feedbackHandler() { //跳转到子页\r\n    var that = this;\r\n    var showModel = that.data.showModel\r\n    that.data.animation = wx.createAnimation({\r\n      duration: 800,\r\n      timingFunction: 'ease'\r\n    });\r\n    console.log(\"in\")\r\n    if (showModel) {\r\n      that.data.changeDay = \"\"\r\n      that.data.dayName = \"\"\r\n      that.data.dates = \"\"\r\n      that.data.add_style = \"add_hide\"\r\n      that.data.animation.opacity(0).translateY('100%').step();\r\n      that.setdata({});\r\n      setTimeout(function () {\r\n        that.data.showModel = !showModel;\r\n        that.setdata({});\r\n      }, 700);\r\n    } else {\r\n      that.data.showModel = !showModel;\r\n      that.data.animation.opacity(0).translateY('100%').step();\r\n      that.setdata({});\r\n      that.data.animation = wx.createAnimation({\r\n        duration: 800,\r\n        timingFunction: 'ease'\r\n      });\r\n      that.data.animation.opacity(1).translateY(0).step();\r\n      that.setdata({})\r\n    }\r\n\r\n    /*wx.navigateTo({\r\n      url: 'addition/addition'\r\n    })*/\r\n  },\r\n\r\n\r\n\r\n\r\n  num_data: function (start_date1, end_date1) { //计算倒数日\r\n    var start_date = new Date(start_date1.replace(/-/g, \"/\"));\r\n    var end_date = new Date(end_date1.replace(/-/g, \"/\"));\r\n    var days = end_date.getTime() - start_date.getTime();\r\n    var day = parseInt(days / (1000 * 60 * 60 * 24));\r\n    return day * -1;\r\n  },\r\n\r\n  terms: function () { //学年显示\r\n    var year = '';\r\n    if (new Date().getMonth() > 4) {\r\n      year = new Date().getFullYear() + '-' + (new Date().getFullYear() + 1) + '学年' + ' ' + '第' + 1 + '学期'\r\n    } else {\r\n      year = new Date().getFullYear() - 1 + '-' + new Date().getFullYear() + '学年' + ' ' + '第' + 2 + '学期'\r\n    }\r\n    this.setdata({\r\n      term: year\r\n    })\r\n  },\r\n\r\n  compare: function (property) {\r\n    return function (a, b) {\r\n      var value1 = a[property];\r\n      var value2 = b[property];\r\n      return value1 - value2;\r\n    }\r\n  },\r\n\r\n\r\n  setdataCalendar: function () { //页面渲染全部倒数日\r\n    var addday = app.globalData._adday || [];\r\n    var xlist = [];\r\n    var xlist1 = [];\r\n    var nowdate = new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate();\r\n    for (let i = 0; i < addday.length; i++) {\r\n      var gapDays2 = this.num_data(addday[i].holidayDate, nowdate);\r\n      if (gapDays2 > 0) {\r\n        xlist.push({\r\n          holidayName: addday[i].holidayName,\r\n          holidayDate: addday[i].holidayDate,\r\n          gapDays: gapDays2,\r\n          holidayRestInfo: addday[i].holidayDate,\r\n          isTouchMove: false\r\n        })\r\n      } else {\r\n        xlist1.push({\r\n          holidayName: addday[i].holidayName,\r\n          holidayDate: addday[i].holidayDate,\r\n          gapDays: gapDays2,\r\n          holidayRestInfo: addday[i].holidayDate,\r\n          isTouchMove: false\r\n        })\r\n      }\r\n    }\r\n\r\n    var list = xlist.sort(this.compare(\"gapDays\")).concat(xlist1.sort(this.compare(\"gapDays\")).reverse())\r\n    app.globalData._adday = list\r\n    this.setdata({\r\n      show: \"\",\r\n      list: list\r\n    })\r\n  },\r\n\r\n  showdates(e) {    //跳转到倒数日的详情页面\r\n    var that = this\r\n    var index1 = e.currentTarget.id\r\n    var dates = that.data.list[index1]\r\n    var holidayName = dates.holidayName\r\n    var gapDays = dates.gapDays\r\n    var holidayDate = dates.holidayDate\r\n    wx.navigateTo({\r\n      url: \"/pages/HOT/HotNoTop/HotNoTop?content=倒数日二跳页&Name=\" + holidayName + \"&gapDays=\" + gapDays + \"&Date=\" + holidayDate,\r\n    })\r\n  },\r\n\r\n  touchstart: function (e) { //开始触摸时 重置所有删除\r\n    this.data.list.forEach(function (v, i) {\r\n      if (v.isTouchMove) //只操作为true的\r\n        v.isTouchMove = false;\r\n    })\r\n    this.setdata({\r\n      startX: e.changedTouches[0].clientX,\r\n      startY: e.changedTouches[0].clientY,\r\n      list: this.data.list\r\n    })\r\n  },\r\n\r\n  touchmove: function (e) {\r\n    var that = this,\r\n    index = e.currentTarget.id, //当前索引\r\n      startX = that.data.startX, //开始X坐标\r\n      startY = that.data.startY, //开始Y坐标\r\n      touchMoveX = e.changedTouches[0].clientX, //滑动变化坐标\r\n      touchMoveY = e.changedTouches[0].clientY, //滑动变化坐标\r\n      //获取滑动角度\r\n      angle = that.angle({\r\n        X: startX,\r\n        Y: startY\r\n      }, {\r\n        X: touchMoveX,\r\n        Y: touchMoveY\r\n      });\r\n    that.data.list.forEach(function (v, i) {\r\n      v.isTouchMove = false\r\n      //滑动超过30度角 return\r\n      if (Math.abs(angle) > 30) return;\r\n      if (i == index) {\r\n        if (touchMoveX > startX) //右滑\r\n          v.isTouchMove = false\r\n        else //左滑\r\n          v.isTouchMove = true\r\n      }\r\n    })\r\n    //更新数据\r\n    that.setdata({\r\n      list: that.data.list\r\n    })\r\n  },\r\n\r\n  angle: function (start, end) {\r\n    var _X = end.X - start.X,\r\n      _Y = end.Y - start.Y\r\n    //返回角度 /Math.atan()返回数字的反正切值\r\n    return 360 * Math.atan(_Y / _X) / (2 * Math.PI);\r\n  },\r\n\r\n  del: function (e) { //删除倒数日  \r\n    var that=this\r\n    wx.showLoading({\r\n      title: '处理中',\r\n      mask: true\r\n    })\r\n    this.data.list.splice(e.currentTarget.id, 1)\r\n    app.globalData._adday = this.data.list\r\n    wx.cloud.callFunction({\r\n      name: 'readday',\r\n      data: {\r\n        _adday: JSON.stringify(this.data.list),\r\n        username: wx.getStorageSync('args').username,\r\n        type: 'write'\r\n      },\r\n      success: res => {\r\n        wx.showToast({\r\n          title: '删除成功',\r\n          icon: 'none',\r\n        })\r\n        that.onShow()\r\n      },\r\n      fail: err => {\r\n        wx.showToast({\r\n          title: '删除失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n  bindInputChange : function (e) { //获取倒数日日期\r\n    console.log(e.detail.value)\r\n    this.setdata({\r\n      dayName: e.detail.value\r\n    })\r\n},\r\n\r\n  bindDateChange: function (e) { //获取倒数日日期\r\n    this.setdata({\r\n      dates: e.detail.value\r\n    })\r\n  },\r\n  addSubmit: function (e) {\r\n    //判断是否修改状态\r\n\r\n    var that = this //提交倒数日\r\n    wx.showLoading({\r\n      title: '处理中',\r\n      mask: true\r\n    })\r\n\r\n    if (this.data.dayName == null || this.data.dayName == \"\" || this.data.dayName == undefined) { //判断填写是否为空\r\n      wx.showToast({\r\n        title: '名称不能为空',\r\n        icon: 'none',\r\n        duration: 1000\r\n      })\r\n    } else if (this.data.dates == null || this.data.dates == \"\" || this.data.dates == undefined) {\r\n      wx.showToast({\r\n        title: '日期不能为空',\r\n        icon: 'none',\r\n        duration: 1000\r\n      })\r\n    } else {\r\n      var add = {\r\n        'holidayName': this.data.dayName,\r\n        'holidayDate': this.data.dates,\r\n      }\r\n      if (this.data.changeDay !== \"\") {\r\n        app.globalData._adday[this.data.changeDay].holidayName = this.data.dayName\r\n        app.globalData._adday[this.data.changeDay].holidayDate = this.data.dates\r\n      } else {\r\n\r\n        app.globalData._adday.push(add)\r\n      }\r\n\r\n      wx.cloud.callFunction({ //访问云函数\r\n        name: 'readday',\r\n        data: {\r\n          _adday: JSON.stringify(app.globalData._adday),\r\n          username: wx.getStorageSync('args').username,\r\n          type: 'write'\r\n        },\r\n        success: res => {\r\n          wx.showToast({\r\n            title: '添加成功',\r\n            icon: 'none',\r\n          })\r\n          that.onShow()\r\n        },\r\n        fail: err => {\r\n          wx.showToast({\r\n            title: '添加失败',\r\n            icon: 'none',\r\n          })\r\n        },\r\n        complete() {\r\n          that.setdata({\r\n            changeDay:\"\",\r\n            dayName: \"\",\r\n            dates: \"\",\r\n            showModel: !that.data.showModel,\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  edit: function (e) {\r\n    //保存到changeDay来调用状态\r\n    this.data.changeDay = e.currentTarget.id\r\n    this.setdata({\r\n      dayName: app.globalData._adday[this.data.changeDay].holidayName,\r\n      dates: app.globalData._adday[this.data.changeDay].holidayDate\r\n    })\r\n    this.feedbackHandler()\r\n  },\r\n\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {options = this.options; this.data.dark =wx.getSystemInfoSync().theme; wx.onThemeChange(e => {console.log(e.theme);this.setdata({dark: e.theme})}); this.setdata(); //读取数据库\r\n    var that = this\r\n    wx.setNavigationBarTitle({ title: 'We校园-倒数日' });\r\n    app.loginState();\r\n    that.terms();\r\n    wx.showLoading({\r\n      title: '加载中',\r\n      mask: true\r\n    })\r\n    wx.cloud.callFunction({\r\n      name: 'readday',\r\n      data: {\r\n        username: wx.getStorageSync('args').username,\r\n        type: 'read'\r\n      },\r\n      success: res => {\r\n        res.result ? res.result : []\r\n        app.globalData._adday = JSON.parse(res.result)\r\n        that.setdataCalendar();\r\n        wx.hideLoading({\r\n          success: (res) => {},\r\n        })\r\n      },\r\n      fail: err => {\r\n        console.log(err)\r\n      }\r\n    })\r\n    that.data.animation = wx.createAnimation({\r\n      duration: 800,\r\n      timingFunction: 'ease'\r\n    });\r\n    that.data.animation.opacity(0).translateY('100%').step();\r\n    that.setdata()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onShow: function (options) {\r\n    this.setdataCalendar();\r\n    // 调用函数时，传入new Date()参数，返回值是日期和时间  \r\n  },\r\n\r\n\r\n  onReady: function () {\r\n\r\n  },\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function (res) {\r\n    return {\r\n      title: '广东石油化工学院校历',\r\n    }\r\n  },\r\n  showPic: function () {\r\n    wx.previewImage({\r\n      // cloud://un1-d62c68.756e-un1-d62c68-1258307938/xl.png\r\n      current: 'https://s1.ax1x.com/2022/05/09/OJRwF0.jpg', // 当前显示图片的http链接\r\n      urls: ['https://s1.ax1x.com/2022/05/09/OJRwF0.jpg'] // 需要预览的图片http链接列表\r\n    })\r\n  },\r\n})\n      \n      \n        }\n            window.exports = runCode;\n        \n            "],"names":[],"sourceRoot":""}
>>>>>>> 46b2c8e4aa2af51395ea925bb37a14da8c9a353d
