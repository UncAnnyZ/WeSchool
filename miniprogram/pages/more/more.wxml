<wxs module="more" src="./more.wxs"></wxs>

<scroll-view class="container" style="height: {{windowHeight}}px;" scroll-y bindscroll="onScroll" bindscrolltoupper="onPullDownRefresh" upper-threshold="-50" bindscrolltolower="onReachBottom" lower-threshold="300">
  <!-- 渐变层 -->
  <view class="gradient-layer" style="height: {{layerHeight}}px; z-index: {{scrollTop > TabScrollTop - 60 ? 2 : ''}};"></view>

  <view class="head" style="width: 100%; height: {{statusBarHeight + lineHeight}}px; overflow: hidden;">
    <!-- 渐变层 - 占位 -->
    <view class="gradient-layer1" style="height: {{layerHeight}}px;" />
    <!-- 状态栏 -->
    <view style="width: 100%; height: 200rpx; position: absolute;"> </view>
    <view style="height: {{statusBarHeight}}px;" />
    <!-- 导航栏 -->
    <view class="head_second" style="height: {{lineHeight}}px;">
      <navigator class="inputBox" hover-class="none" url="./pages/searchPage/searchPage">
        <input placeholder="搜索你感兴趣的内容"	placeholder-class="searchInput_holder" class="searchInput" disabled="true" />
        <image style="width: 35rpx; height: 35rpx; margin-left:40rpx; z-index: 3;" src="./images/search.png"></image>
      </navigator>

    </view>

  </view>
  <!-- 填充 -->
  <view style="height: {{(statusBarHeight + lineHeight)}}px;"></view>

  <!-- 小纸条 - 弹幕 -->
  <danmu dmList="{{dmList}}" />
  <!-- 更多模块 -->
  <MoreModule bind:navigate="navigate" />
  <!-- 课表 -->
  <weimob-curriculum course="{{course}}" msg="{{msg}}" />

  <!-- 标签 -->
  <weimob-sticky scrollTop="{{scrollTop}}" offsetTop="{{offsetTop}}" style="z-index: 3;position: relative;">
    <TabScroll style="z-index: 3;position: relative;" type="校友圈标签" tabItem="{{tabitem}}" currentTab="{{currentTab}}" bind:setTab="setCurrentTab" id="TabScroll" class="TabScroll" showTab="true" />
  </weimob-sticky>

  <!-- 瀑布流 -->
  <scroll-view wx:if="{{campus_account!=true}}" class="page" style="z-index: -1;">
    <Loading wx:if="{{showLoading}}" />

    <swiper current="{{currentTab}}" bindchange="waterChange" style=" height: {{currentWaterFlowHeight}}px;">
      <swiper-item wx:for="{{allList}}" wx:key="body" wx:for-index="index">
        <waterFlowCards height="{{windowHeight - (statusBarHeight + lineHeight) - 28}}px;" id="waterFlowCards{{index}}" list="{{item}}" tabitem="{{tabitem}}" currentTab="{{index}}" bind:getData="getData" bind:onReachBottom="onReachBottom" bind:onPullDownRefresh="onPullDownRefresh" bind:setAllList="setAllList" />
      </swiper-item>
    </swiper>

  </scroll-view>
</scroll-view>